<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cyber Cryptogram</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    height: 100vh;
    background: radial-gradient(ellipse at top, rgba(0, 43, 21, 1), rgba(0, 0, 0, 1));
    font-family: 'Share Tech Mono', monospace;
    color: rgb(0, 255, 102);
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.scan-line {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgb(0, 255, 102), transparent);
    box-shadow: 0 0 15px rgb(0, 255, 102);
    animation: scan 5s linear infinite;
    pointer-events: none;
    z-index: 1;
}

@keyframes scan {
    0% { top: 0; }
    100% { top: 100%; }
}

.grid-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        linear-gradient(rgba(0, 255, 102, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 255, 102, 0.05) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
}

.container {
    max-width: 900px;
    width: 90%;
    padding: 40px;
    background: rgba(0, 10, 5, 0.92);
    border: 2px solid rgb(0, 204, 102);
    box-shadow: 0 0 40px rgba(0, 255, 102, 0.6), inset 0 0 20px rgba(0, 255, 102, 0.1);
    position: relative;
    z-index: 2;
    border-radius: 3px;
}

h2 {
    font-size: 26px;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: rgb(0, 255, 102);
    text-shadow: 0 0 15px rgba(0, 255, 102, 0.7);
    text-align: center;
    margin-bottom: 20px;
}

.encoded { 
    display: flex; 
    flex-wrap: wrap; 
    justify-content: center; 
    gap: 5px; 
    margin: 20px 0; 
}

.letter { 
    width: 28px; 
    height: 36px; 
    border-bottom: 2px solid rgb(0, 255, 102); 
    text-align: center; 
    font-size: 18px; 
    cursor: pointer; 
}

.space { 
    width: 14px; 
    border: none; 
}

.decoder { 
    display: flex; 
    flex-wrap: wrap; 
    justify-content: center; 
    gap: 10px; 
    margin-bottom: 20px; 
}

.map { 
    background: rgba(0, 20, 10, 0.6); 
    border: 1px solid rgb(0, 255, 102); 
    padding: 6px 10px; 
    display: flex; 
    align-items: center; 
    gap: 6px; 
}

.map input { 
    width: 26px; 
    height: 26px; 
    text-align: center; 
    font-size: 16px; 
    background: black; 
    color: rgb(0, 255, 102); 
    border: 1px solid rgb(0, 255, 102); 
}

button { 
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(0, 61, 31, 0.8));
    color: rgb(0, 255, 102); 
    border: 1px solid rgb(0, 255, 102); 
    padding: 8px 20px; 
    cursor: pointer; 
    font-family: inherit; 
    margin: 5px; 
    border-radius: 3px;
    position: relative;
    overflow: hidden;
}

button:hover {
    background: rgb(0, 255, 102);
    color: rgb(0, 0, 0);
    box-shadow: 0 0 25px rgb(0, 255, 102), 0 0 50px rgba(0, 255, 102, 0.3);
}

.result { 
    text-align: center; 
    margin-top: 15px; 
    min-height: 30px; 
    color: rgb(102, 255, 170);
}
input:focus {
    box-shadow: 0 0 15px rgba(0, 255, 102, 0.8), inset 0 0 10px rgba(0, 255, 102, 0.2);
    border-width: 2px;
    background: rgba(0, 20, 10, 0.9);
    outline: none;
}
</style>
</head>
<body>

<div class="grid-bg"></div>
<div class="scan-line"></div>

<div class="container">
    <h2>TASK 2:CYBER CRYPTOGRAM</h2>

    <div class="encoded" id="encoded"></div>
    <div class="decoder" id="decoder"></div>

    <div style="text-align:center">
        <button onclick="check()">CHECK</button>
        <button onclick="resetGame()">RESET</button>
        <button onclick="history.back()">BACK</button>
    </div>

    <div class="result" id="result">Decode the message to get the password</div>
</div>

<script>
const plaintext = "THE FUTURE OF SECURITY IS WRITTEN IN CODE NOT CHAOS";
const lastTwoPassword = "84";
function generateCipher() {
    const alpha = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
    const shuffled = [...alpha].sort(() => Math.random() - 0.5);
    const map = {};
    alpha.forEach((l, i) => map[l] = shuffled[i]);
    return map;
}

const cipher = generateCipher();
const reverseCipher = {};
for (const k in cipher) reverseCipher[cipher[k]] = k;
const encodedText = plaintext.split("").map(c => (c >= "A" && c <= "Z") ? cipher[c] : c).join("");
const guesses = {};
const encodedDiv = document.getElementById("encoded");
encodedText.split("").forEach(char => {
    const span = document.createElement("span");
    if (char === " ") { span.className = "letter space"; } 
    else { 
        span.className = "letter"; 
        span.dataset.c = char; 
        span.textContent = char; 
        span.onclick = () => {
            const input = document.querySelector(`input[data-c='${char}']`);
            if (input) input.focus();
        };
    }
    encodedDiv.appendChild(span);
});

const decoderDiv = document.getElementById("decoder");
const uniqueLetters = [...new Set(encodedText.replace(/[^A-Z]/g, ""))].sort();
uniqueLetters.forEach(l => {
    const box = document.createElement("div");
    box.className = "map";
    box.innerHTML = `<strong>${l}</strong> → <input maxlength="1" data-c="${l}">`;
    decoderDiv.appendChild(box);
});

document.querySelectorAll("input").forEach(input => {
    input.addEventListener("input", () => {
        input.value = input.value.toUpperCase().replace(/[^A-Z]/g, "");
        guesses[input.dataset.c] = input.value;
        updateDisplay();
    });
});

function updateDisplay() {
    document.querySelectorAll(".letter").forEach(span => {
        const c = span.dataset.c;
        if (!c) return;
        span.textContent = guesses[c] || c;
    });
}

function check() {
    for (const c of uniqueLetters) {
        if (!guesses[c] || guesses[c] !== reverseCipher[c]) {
            document.getElementById("result").textContent = "Incorrect — keep trying.";
            return;
        }
    }
    document.getElementById("result").innerHTML =
        `✓ DECODED<br>LAST 2 DIGITS OF PASSWORD: <b>${lastTwoPassword}</b>`;
    activateScanLine();
}

function activateScanLine() {
    const scanLine = document.querySelector('.scan-line');
    scanLine.style.background = 'linear-gradient(90deg, transparent, rgb(0, 255, 102), transparent)';
    scanLine.style.boxShadow = '0 0 15px rgb(0, 255, 102)';
    setTimeout(() => {
        scanLine.style.background = 'linear-gradient(90deg, transparent, rgb(0, 255, 102), transparent)';
        scanLine.style.boxShadow = '0 0 10px rgb(0, 255, 102)';
    }, 3000);
}

function resetGame() {
    for (const k in guesses) delete guesses[k];
    document.querySelectorAll("input").forEach(i => i.value = "");
    updateDisplay();
    document.getElementById("result").textContent = "Decode the message...";
}
</script>

</body>
</html>

